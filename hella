--[[
 .____                  ________ ___.    _____                           __                
 |    |    __ _______   \_____  \\_ |___/ ____\_ __  ______ ____ _____ _/  |_  ___________ 
 |    |   |  |  \__  \   /   |   \| __ \   __\  |  \/  ___// ___\\__  \\   __\/  _ \_  __ \
 |    |___|  |  // __ \_/    |    \ \_\ \  | |  |  /\___ \\  \___ / __ \|  | (  <_> )  | \/
 |_______ \____/(____  /\_______  /___  /__| |____//____  >\___  >____  /__|  \____/|__|   
         \/          \/         \/    \/                \/     \/     \/                   
          \_Welcome to LuaObfuscator.com   (Alpha 0.10.9) ~  Much Love, Ferib 

]]--

local Players = game:GetService("Players");
local UserInputService = game:GetService("UserInputService");
local RunService = game:GetService("RunService");
local TweenService = game:GetService("TweenService");
local Workspace = game:GetService("Workspace");
local HttpService = game:GetService("HttpService");
local LocalPlayer = Players.LocalPlayer;
local Camera = Workspace.CurrentCamera;
local KEY_LINK = "https://work.ink/21KD/free-script-ftchub";
local KEY_API_URL = "https://work.ink/_api/v2/token/isValid/";
local SAVED_KEY_FILE = "FTCHub_SavedKey.txt";
local KeyValidated = false;
local MainGuiEnabled = false;
local Config = {ESP={Enabled=false,ShowNames=true,ShowDistance=true,ShowHealth=true,ShowBoxes=true,ShowTracers=false,TeamCheck=true,MaxDistance=1000,BoxColor=Color3.fromRGB(138, 43, 226),TracerColor=Color3.fromRGB(138, 43, 226),NameColor=Color3.fromRGB(255, 255, 255),HealthBarColor=Color3.fromRGB(0, 255, 0),UpdateRate=0.05,MaxPlayers=50,ShowNPCs=true,NPCColor=Color3.fromRGB(255, 100, 100),MaxNPCs=30},Aimbot={Enabled=false,TeamCheck=false,VisibleCheck=false,FOV=200,Smoothness=0.5,AimKey="MouseButton2",AimPart="Head",ShowFOV=true,FOVColor=Color3.fromRGB(138, 43, 226),AimNPCs=true},Player={WalkSpeed=16,DefaultWalkSpeed=16,FlyEnabled=false,FlySpeed=50},GunMods={NoRecoil=false,NoSpread=false,AutoReload=false},SilentAim={Enabled=false,TeamCheck=false,VisibleCheck=false,FOV=150,HitChance=100,TargetPart="Head",ShowFOV=true,FOVColor=Color3.fromRGB(255, 165, 0),AimNPCs=true}};
local ESPObjects = {};
local NPCESPObjects = {};
local FOVCircle;
local SilentAimFOVCircle;
local MainGui;
local KeySystemGui;
local isUIVisible = true;
local originalWalkSpeed = 16;
local flyConnection = nil;
local flyBodyVelocity = nil;
local flyBodyGyro = nil;
local lastNPCScan = 0;
local NPC_SCAN_INTERVAL = 3;
local lastESPUpdate = 0;
local cachedNPCs = {};
local lastAmmoCheck = 0;
local AMMO_CHECK_INTERVAL = 0.5;
local function CreateTween(object, properties, duration)
	local tweenInfo = TweenInfo.new(duration or 0.3, Enum.EasingStyle.Quad, Enum.EasingDirection.Out);
	local tween = TweenService:Create(object, tweenInfo, properties);
	tween:Play();
	return tween;
end
local function Notify(title, text)
	game.StarterGui:SetCore("SendNotification", {Title=title,Text=text,Duration=3});
end
local function SaveKey(key)
	if writefile then
		writefile(SAVED_KEY_FILE, key);
	end
end
local function LoadKey()
	if (readfile and isfile and isfile(SAVED_KEY_FILE)) then
		return readfile(SAVED_KEY_FILE);
	end
	return nil;
end
local function ValidateKey(key)
	local success, response = pcall(function()
		return game:HttpGet(KEY_API_URL .. key);
	end);
	if success then
		local decoded = HttpService:JSONDecode(response);
		if (decoded and (decoded.valid == true)) then
			return true;
		end
	end
	return false;
end
local function CopyToClipboard(text)
	if setclipboard then
		setclipboard(text);
		return true;
	end
	return false;
end
local function CreateKeySystemGUI()
	local ScreenGui = Instance.new("ScreenGui");
	ScreenGui.Name = "FTCHubKeySystem";
	ScreenGui.ResetOnSpawn = false;
	ScreenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling;
	if gethui then
		ScreenGui.Parent = gethui();
	elseif (syn and syn.protect_gui) then
		syn.protect_gui(ScreenGui);
		ScreenGui.Parent = game.CoreGui;
	else
		ScreenGui.Parent = game.CoreGui;
	end
	local BlurBG = Instance.new("Frame");
	BlurBG.Name = "BlurBG";
	BlurBG.Size = UDim2.new(1, 0, 1, 0);
	BlurBG.BackgroundColor3 = Color3.fromRGB(0, 0, 0);
	BlurBG.BackgroundTransparency = 0.3;
	BlurBG.BorderSizePixel = 0;
	BlurBG.Parent = ScreenGui;
	local MainFrame = Instance.new("Frame");
	MainFrame.Name = "MainFrame";
	MainFrame.Size = UDim2.new(0, 500, 0, 400);
	MainFrame.Position = UDim2.new(0.5, -250, 0.5, -200);
	MainFrame.BackgroundColor3 = Color3.fromRGB(15, 15, 25);
	MainFrame.BorderSizePixel = 0;
	MainFrame.Parent = ScreenGui;
	local MainCorner = Instance.new("UICorner");
	MainCorner.CornerRadius = UDim.new(0, 25);
	MainCorner.Parent = MainFrame;
	local GlowBorder = Instance.new("Frame");
	GlowBorder.Size = UDim2.new(1, 4, 1, 4);
	GlowBorder.Position = UDim2.new(0, -2, 0, -2);
	GlowBorder.BackgroundColor3 = Color3.fromRGB(138, 43, 226);
	GlowBorder.BackgroundTransparency = 0.6;
	GlowBorder.BorderSizePixel = 0;
	GlowBorder.ZIndex = 0;
	GlowBorder.Parent = MainFrame;
	local GlowCorner = Instance.new("UICorner");
	GlowCorner.CornerRadius = UDim.new(0, 25);
	GlowCorner.Parent = GlowBorder;
	task.spawn(function()
		while GlowBorder.Parent do
			CreateTween(GlowBorder, {BackgroundTransparency=0.3}, 2);
			task.wait(2);
			CreateTween(GlowBorder, {BackgroundTransparency=0.6}, 2);
			task.wait(2);
		end
	end);
	local Header = Instance.new("Frame");
	Header.Size = UDim2.new(1, 0, 0, 80);
	Header.BackgroundColor3 = Color3.fromRGB(10, 10, 20);
	Header.BorderSizePixel = 0;
	Header.Parent = MainFrame;
	local HeaderCorner = Instance.new("UICorner");
	HeaderCorner.CornerRadius = UDim.new(0, 25);
	HeaderCorner.Parent = Header;
	local Title = Instance.new("TextLabel");
	Title.Size = UDim2.new(1, 0, 1, 0);
	Title.BackgroundTransparency = 1;
	Title.Text = "âš¡ FTC HUB - KEY SYSTEM";
	Title.TextColor3 = Color3.fromRGB(255, 255, 255);
	Title.TextSize = 28;
	Title.Font = Enum.Font.GothamBlack;
	Title.Parent = Header;
	local TitleGlow = Instance.new("TextLabel");
	TitleGlow.Size = Title.Size;
	TitleGlow.Position = Title.Position;
	TitleGlow.BackgroundTransparency = 1;
	TitleGlow.Text = Title.Text;
	TitleGlow.TextColor3 = Color3.fromRGB(138, 43, 226);
	TitleGlow.TextSize = 28;
	TitleGlow.Font = Enum.Font.GothamBlack;
	TitleGlow.TextTransparency = 0.7;
	TitleGlow.ZIndex = 0;
	TitleGlow.Parent = Header;
	local Content = Instance.new("Frame");
	Content.Size = UDim2.new(1, -60, 1, -140);
	Content.Position = UDim2.new(0, 30, 0, 100);
	Content.BackgroundTransparency = 1;
	Content.Parent = MainFrame;
	local InfoText = Instance.new("TextLabel");
	InfoText.Size = UDim2.new(1, 0, 0, 50);
	InfoText.Position = UDim2.new(0, 0, 0, 0);
	InfoText.BackgroundTransparency = 1;
	InfoText.Text = "Get your key to access FTC Hub";
	InfoText.TextColor3 = Color3.fromRGB(200, 200, 220);
	InfoText.TextSize = 16;
	InfoText.Font = Enum.Font.GothamSemibold;
	InfoText.TextWrapped = true;
	InfoText.Parent = Content;
	local GetKeyBtn = Instance.new("TextButton");
	GetKeyBtn.Size = UDim2.new(1, 0, 0, 50);
	GetKeyBtn.Position = UDim2.new(0, 0, 0, 60);
	GetKeyBtn.BackgroundColor3 = Color3.fromRGB(138, 43, 226);
	GetKeyBtn.BorderSizePixel = 0;
	GetKeyBtn.Text = "ðŸ“‹ Copy Key Link";
	GetKeyBtn.TextColor3 = Color3.fromRGB(255, 255, 255);
	GetKeyBtn.TextSize = 18;
	GetKeyBtn.Font = Enum.Font.GothamBold;
	GetKeyBtn.AutoButtonColor = false;
	GetKeyBtn.Parent = Content;
	local GetKeyCorner = Instance.new("UICorner");
	GetKeyCorner.CornerRadius = UDim.new(0, 15);
	GetKeyCorner.Parent = GetKeyBtn;
	local GetKeyGradient = Instance.new("UIGradient");
	GetKeyGradient.Color = ColorSequence.new({ColorSequenceKeypoint.new(0, Color3.fromRGB(138, 43, 226)),ColorSequenceKeypoint.new(1, Color3.fromRGB(218, 165, 32))});
	GetKeyGradient.Rotation = 45;
	GetKeyGradient.Parent = GetKeyBtn;
	local KeyInputFrame = Instance.new("Frame");
	KeyInputFrame.Size = UDim2.new(1, 0, 0, 50);
	KeyInputFrame.Position = UDim2.new(0, 0, 0, 130);
	KeyInputFrame.BackgroundColor3 = Color3.fromRGB(25, 25, 40);
	KeyInputFrame.BorderSizePixel = 0;
	KeyInputFrame.Parent = Content;
	local KeyInputCorner = Instance.new("UICorner");
	KeyInputCorner.CornerRadius = UDim.new(0, 15);
	KeyInputCorner.Parent = KeyInputFrame;
	local KeyInput = Instance.new("TextBox");
	KeyInput.Size = UDim2.new(1, -20, 1, 0);
	KeyInput.Position = UDim2.new(0, 10, 0, 0);
	KeyInput.BackgroundTransparency = 1;
	KeyInput.PlaceholderText = "Enter your key here...";
	KeyInput.PlaceholderColor3 = Color3.fromRGB(100, 100, 120);
	KeyInput.Text = "";
	KeyInput.TextColor3 = Color3.fromRGB(255, 255, 255);
	KeyInput.TextSize = 16;
	KeyInput.Font = Enum.Font.GothamSemibold;
	KeyInput.TextXAlignment = Enum.TextXAlignment.Left;
	KeyInput.ClearTextOnFocus = false;
	KeyInput.Parent = KeyInputFrame;
	local SubmitBtn = Instance.new("TextButton");
	SubmitBtn.Size = UDim2.new(1, 0, 0, 50);
	SubmitBtn.Position = UDim2.new(0, 0, 0, 200);
	SubmitBtn.BackgroundColor3 = Color3.fromRGB(0, 200, 100);
	SubmitBtn.BorderSizePixel = 0;
	SubmitBtn.Text = "âœ“ Validate Key";
	SubmitBtn.TextColor3 = Color3.fromRGB(255, 255, 255);
	SubmitBtn.TextSize = 18;
	SubmitBtn.Font = Enum.Font.GothamBold;
	SubmitBtn.AutoButtonColor = false;
	SubmitBtn.Parent = Content;
	local SubmitCorner = Instance.new("UICorner");
	SubmitCorner.CornerRadius = UDim.new(0, 15);
	SubmitCorner.Parent = SubmitBtn;
	local StatusText = Instance.new("TextLabel");
	StatusText.Size = UDim2.new(1, 0, 0, 30);
	StatusText.Position = UDim2.new(0, 0, 1, -40);
	StatusText.BackgroundTransparency = 1;
	StatusText.Text = "";
	StatusText.TextColor3 = Color3.fromRGB(255, 100, 100);
	StatusText.TextSize = 14;
	StatusText.Font = Enum.Font.GothamSemibold;
	StatusText.Parent = Content;
	GetKeyBtn.MouseEnter:Connect(function()
		CreateTween(GetKeyBtn, {BackgroundColor3=Color3.fromRGB(158, 63, 246)}, 0.2);
	end);
	GetKeyBtn.MouseLeave:Connect(function()
		CreateTween(GetKeyBtn, {BackgroundColor3=Color3.fromRGB(138, 43, 226)}, 0.2);
	end);
	SubmitBtn.MouseEnter:Connect(function()
		CreateTween(SubmitBtn, {BackgroundColor3=Color3.fromRGB(0, 220, 120)}, 0.2);
	end);
	SubmitBtn.MouseLeave:Connect(function()
		CreateTween(SubmitBtn, {BackgroundColor3=Color3.fromRGB(0, 200, 100)}, 0.2);
	end);
	GetKeyBtn.MouseButton1Click:Connect(function()
		if CopyToClipboard(KEY_LINK) then
			StatusText.Text = "âœ“ Link copied to clipboard!";
			StatusText.TextColor3 = Color3.fromRGB(0, 255, 100);
			Notify("Key System", "Link copied to clipboard!");
		else
			StatusText.Text = "Manual copy: " .. KEY_LINK;
			StatusText.TextColor3 = Color3.fromRGB(255, 200, 0);
			Notify("Key System", "Copy link manually");
		end
	end);
	SubmitBtn.MouseButton1Click:Connect(function()
		local key = KeyInput.Text;
		if ((key == "") or (#key < 10)) then
			StatusText.Text = "âœ— Please enter a valid key";
			StatusText.TextColor3 = Color3.fromRGB(255, 100, 100);
			return;
		end
		StatusText.Text = "â³ Validating key...";
		StatusText.TextColor3 = Color3.fromRGB(255, 200, 0);
		SubmitBtn.Text = "â³ Validating...";
		task.spawn(function()
			local isValid = ValidateKey(key);
			if isValid then
				StatusText.Text = "âœ“ Key validated successfully!";
				StatusText.TextColor3 = Color3.fromRGB(0, 255, 100);
				SubmitBtn.Text = "âœ“ Success!";
				SaveKey(key);
				Notify("Key System", "Key validated! Loading hub...");
				task.wait(1);
				KeyValidated = true;
				ScreenGui:Destroy();
				KeySystemGui = nil;
				CreateGUI();
				MainGuiEnabled = true;
				Notify("FTC HUB", "Loaded! Press RightShift to toggle");
			else
				StatusText.Text = "âœ— Invalid key. Please try again.";
				StatusText.TextColor3 = Color3.fromRGB(255, 100, 100);
				SubmitBtn.Text = "âœ“ Validate Key";
				Notify("Key System", "Invalid key!");
			end
		end);
	end);
	KeySystemGui = ScreenGui;
	return ScreenGui;
end
local function IsNPC(character)
	if not character then
		return false;
	end
	local player = Players:GetPlayerFromCharacter(character);
	return player == nil;
end
local function GetAllNPCs()
	local npcs = {};
	local count = 0;
	local folders = {Workspace:FindFirstChild("Zombies"),Workspace:FindFirstChild("NPCs"),Workspace:FindFirstChild("Enemies"),Workspace:FindFirstChild("Mobs"),Workspace:FindFirstChild("Monsters")};
	for _, folder in pairs(folders) do
		if (folder and (count < Config.ESP.MaxNPCs)) then
			for _, obj in pairs(folder:GetDescendants()) do
				if (count >= Config.ESP.MaxNPCs) then
					break;
				end
				if (obj:IsA("Model") and obj:FindFirstChild("Humanoid") and obj:FindFirstChild("HumanoidRootPart")) then
					if IsNPC(obj) then
						table.insert(npcs, obj);
						count = count + 1;
					end
				end
			end
		end
	end
	if (count < 10) then
		for _, obj in pairs(Workspace:GetChildren()) do
			if (count >= Config.ESP.MaxNPCs) then
				break;
			end
			if obj:IsA("Model") then
				local name = obj.Name:lower();
				if (name:find("zombie") or name:find("npc") or name:find("enemy")) then
					if (obj:FindFirstChild("Humanoid") and obj:FindFirstChild("HumanoidRootPart")) then
						if IsNPC(obj) then
							table.insert(npcs, obj);
							count = count + 1;
						end
					end
				end
			end
		end
	end
	cachedNPCs = npcs;
	return npcs;
end
local function SetWalkSpeed(speed)
	local character = LocalPlayer.Character;
	if character then
		local humanoid = character:FindFirstChildOfClass("Humanoid");
		if humanoid then
			humanoid.WalkSpeed = speed;
			Config.Player.WalkSpeed = speed;
		end
	end
end
local function InitializeWalkSpeed()
	local character = LocalPlayer.Character;
	if character then
		local humanoid = character:FindFirstChildOfClass("Humanoid");
		if humanoid then
			originalWalkSpeed = humanoid.WalkSpeed;
			Config.Player.DefaultWalkSpeed = originalWalkSpeed;
		end
	end
end
local function StartFly()
	local character = LocalPlayer.Character;
	if not character then
		return;
	end
	local rootPart = character:FindFirstChild("HumanoidRootPart");
	if not rootPart then
		return;
	end
	flyBodyVelocity = Instance.new("BodyVelocity");
	flyBodyVelocity.Velocity = Vector3.new(0, 0, 0);
	flyBodyVelocity.MaxForce = Vector3.new(8999999488, 8999999488, 8999999488);
	flyBodyVelocity.Parent = rootPart;
	flyBodyGyro = Instance.new("BodyGyro");
	flyBodyGyro.MaxTorque = Vector3.new(8999999488, 8999999488, 8999999488);
	flyBodyGyro.P = 90000;
	flyBodyGyro.CFrame = rootPart.CFrame;
	flyBodyGyro.Parent = rootPart;
	flyConnection = RunService.Heartbeat:Connect(function()
		if not Config.Player.FlyEnabled then
			return;
		end
		local character = LocalPlayer.Character;
		if not character then
			return;
		end
		local rootPart = character:FindFirstChild("HumanoidRootPart");
		local humanoid = character:FindFirstChildOfClass("Humanoid");
		if (not rootPart or not humanoid) then
			return;
		end
		local camera = workspace.CurrentCamera;
		local moveDirection = Vector3.new(0, 0, 0);
		if UserInputService:IsKeyDown(Enum.KeyCode.W) then
			moveDirection = moveDirection + camera.CFrame.LookVector;
		end
		if UserInputService:IsKeyDown(Enum.KeyCode.S) then
			moveDirection = moveDirection - camera.CFrame.LookVector;
		end
		if UserInputService:IsKeyDown(Enum.KeyCode.A) then
			moveDirection = moveDirection - camera.CFrame.RightVector;
		end
		if UserInputService:IsKeyDown(Enum.KeyCode.D) then
			moveDirection = moveDirection + camera.CFrame.RightVector;
		end
		if UserInputService:IsKeyDown(Enum.KeyCode.Space) then
			moveDirection = moveDirection + Vector3.new(0, 1, 0);
		end
		if UserInputService:IsKeyDown(Enum.KeyCode.LeftShift) then
			moveDirection = moveDirection - Vector3.new(0, 1, 0);
		end
		if flyBodyVelocity then
			flyBodyVelocity.Velocity = moveDirection * Config.Player.FlySpeed;
		end
		if flyBodyGyro then
			flyBodyGyro.CFrame = camera.CFrame;
		end
	end);
	Notify("Fly", "Enabled! Use WASD + Space/Shift");
end
local function StopFly()
	if flyConnection then
		flyConnection:Disconnect();
		flyConnection = nil;
	end
	if flyBodyVelocity then
		flyBodyVelocity:Destroy();
		flyBodyVelocity = nil;
	end
	if flyBodyGyro then
		flyBodyGyro:Destroy();
		flyBodyGyro = nil;
	end
	Notify("Fly", "Disabled");
end
local function CheckAutoReload()
	if not Config.GunMods.AutoReload then
		return;
	end
	local currentTime = tick();
	if ((currentTime - lastAmmoCheck) < AMMO_CHECK_INTERVAL) then
		return;
	end
	lastAmmoCheck = currentTime;
	local character = LocalPlayer.Character;
	if not character then
		return;
	end
	local tool = character:FindFirstChildOfClass("Tool");
	if not tool then
		return;
	end
	local ammoValue = tool:FindFirstChild("Ammo") or tool:FindFirstChild("CurrentAmmo") or tool:FindFirstChild("MagAmmo");
	if not ammoValue then
		local config = tool:FindFirstChild("Configuration") or tool:FindFirstChild("Config") or tool:FindFirstChild("Settings");
		if config then
			ammoValue = config:FindFirstChild("Ammo") or config:FindFirstChild("CurrentAmmo") or config:FindFirstChild("MagAmmo");
		end
	end
	if (ammoValue and (ammoValue:IsA("NumberValue") or ammoValue:IsA("IntValue"))) then
		if (ammoValue.Value <= 0) then
			local vim = game:GetService("VirtualInputManager");
			vim:SendKeyEvent(true, Enum.KeyCode.R, false, game);
			task.wait(0.05);
			vim:SendKeyEvent(false, Enum.KeyCode.R, false, game);
		end
	end
end
local function ApplyGunMods()
	local tools = {};
	local ch = LocalPlayer.Character;
	local bp = LocalPlayer:FindFirstChild("Backpack");
	if ch then
		for _, t in pairs(ch:GetChildren()) do
			if t:IsA("Tool") then
				table.insert(tools, t);
			end
		end
	end
	if bp then
		for _, t in pairs(bp:GetChildren()) do
			if t:IsA("Tool") then
				table.insert(tools, t);
			end
		end
	end
	for _, tool in pairs(tools) do
		for _, d in pairs(tool:GetDescendants()) do
			if (d:IsA("NumberValue") or d:IsA("IntValue")) then
				local n = d.Name:lower();
				if (Config.GunMods.NoRecoil and (n:find("recoil") or n:find("kick") or n:find("shake"))) then
					d.Value = 0;
				end
				if (Config.GunMods.NoSpread and (n:find("spread") or n:find("accura"))) then
					d.Value = 0;
				end
			end
		end
	end
end
local function CreateDrawing(type, properties)
	local drawing = Drawing.new(type);
	for property, value in pairs(properties) do
		drawing[property] = value;
	end
	return drawing;
end
local function GetCharacter(player)
	return player.Character;
end
local function GetRootPart(character)
	return character and (character:FindFirstChild("HumanoidRootPart") or character:FindFirstChild("Torso"));
end
local function GetHealth(character)
	local humanoid = character and character:FindFirstChild("Humanoid");
	return (humanoid and {Health=humanoid.Health,MaxHealth=humanoid.MaxHealth}) or nil;
end
local function WorldToScreen(position)
	local screenPos, onScreen = Camera:WorldToViewportPoint(position);
	return Vector2.new(screenPos.X, screenPos.Y), onScreen, screenPos.Z;
end
local function CreateESP(player)
	if (player == LocalPlayer) then
		return;
	end
	local esp = {Name=CreateDrawing("Text", {Size=16,Center=true,Outline=true,Color=Config.ESP.NameColor,Visible=false}),Distance=CreateDrawing("Text", {Size=14,Center=true,Outline=true,Color=Color3.fromRGB(200, 200, 220),Visible=false}),Box={TopLeft=CreateDrawing("Line", {Thickness=2,Color=Config.ESP.BoxColor,Visible=false}),TopRight=CreateDrawing("Line", {Thickness=2,Color=Config.ESP.BoxColor,Visible=false}),BottomLeft=CreateDrawing("Line", {Thickness=2,Color=Config.ESP.BoxColor,Visible=false}),BottomRight=CreateDrawing("Line", {Thickness=2,Color=Config.ESP.BoxColor,Visible=false})},HealthBar={Outline=CreateDrawing("Line", {Thickness=4,Color=Color3.fromRGB(0, 0, 0),Visible=false}),Bar=CreateDrawing("Line", {Thickness=2,Color=Config.ESP.HealthBarColor,Visible=false})},Tracer=CreateDrawing("Line", {Thickness=1,Color=Config.ESP.TracerColor,Visible=false}),Player=player};
	ESPObjects[player] = esp;
	return esp;
end
local function CreateNPCESP(character)
	if (not character or not character:FindFirstChild("HumanoidRootPart")) then
		return;
	end
	local esp = {Name=CreateDrawing("Text", {Size=16,Center=true,Outline=true,Color=Color3.fromRGB(255, 100, 100),Visible=false}),Distance=CreateDrawing("Text", {Size=14,Center=true,Outline=true,Color=Color3.fromRGB(200, 200, 220),Visible=false}),Box={TopLeft=CreateDrawing("Line", {Thickness=2,Color=Color3.fromRGB(255, 0, 0),Visible=false}),TopRight=CreateDrawing("Line", {Thickness=2,Color=Color3.fromRGB(255, 0, 0),Visible=false}),BottomLeft=CreateDrawing("Line", {Thickness=2,Color=Color3.fromRGB(255, 0, 0),Visible=false}),BottomRight=CreateDrawing("Line", {Thickness=2,Color=Color3.fromRGB(255, 0, 0),Visible=false})},HealthBar={Outline=CreateDrawing("Line", {Thickness=4,Color=Color3.fromRGB(0, 0, 0),Visible=false}),Bar=CreateDrawing("Line", {Thickness=2,Color=Config.ESP.HealthBarColor,Visible=false})},Tracer=CreateDrawing("Line", {Thickness=1,Color=Color3.fromRGB(255, 0, 0),Visible=false}),Character=character};
	NPCESPObjects[character] = esp;
	return esp;
end
local function RemoveESP(player)
	local esp = ESPObjects[player];
	if esp then
		esp.Name:Remove();
		esp.Distance:Remove();
		for _, line in pairs(esp.Box) do
			line:Remove();
		end
		esp.HealthBar.Outline:Remove();
		esp.HealthBar.Bar:Remove();
		esp.Tracer:Remove();
		ESPObjects[player] = nil;
	end
end
local function RemoveNPCESP(character)
	local esp = NPCESPObjects[character];
	if esp then
		esp.Name:Remove();
		esp.Distance:Remove();
		for _, line in pairs(esp.Box) do
			line:Remove();
		end
		esp.HealthBar.Outline:Remove();
		esp.HealthBar.Bar:Remove();
		esp.Tracer:Remove();
		NPCESPObjects[character] = nil;
	end
end
local function HideESP(esp)
	esp.Name.Visible = false;
	esp.Distance.Visible = false;
	esp.Tracer.Visible = false;
	esp.HealthBar.Outline.Visible = false;
	esp.HealthBar.Bar.Visible = false;
	for _, line in pairs(esp.Box) do
		line.Visible = false;
	end
end
local function UpdateESP()
	if not Config.ESP.Enabled then
		for _, esp in pairs(ESPObjects) do
			HideESP(esp);
		end
		for _, esp in pairs(NPCESPObjects) do
			HideESP(esp);
		end
		return;
	end
	local playersProcessed = 0;
	for player, esp in pairs(ESPObjects) do
		if (playersProcessed >= Config.ESP.MaxPlayers) then
			break;
		end
		if (not player or not player.Parent) then
			RemoveESP(player);
			continue;
		end
		if (Config.ESP.TeamCheck and (player.Team == LocalPlayer.Team)) then
			HideESP(esp);
			continue;
		end
		local character = GetCharacter(player);
		local rootPart = GetRootPart(character);
		if (not character or not rootPart) then
			HideESP(esp);
			continue;
		end
		local distance = (rootPart.Position - Camera.CFrame.Position).Magnitude;
		if (distance > Config.ESP.MaxDistance) then
			HideESP(esp);
			continue;
		end
		local screenPos, onScreen = WorldToScreen(rootPart.Position);
		if not onScreen then
			HideESP(esp);
			continue;
		end
		playersProcessed = playersProcessed + 1;
		if Config.ESP.ShowNames then
			esp.Name.Position = Vector2.new(screenPos.X, screenPos.Y - 40);
			esp.Name.Text = player.Name;
			esp.Name.Visible = true;
		else
			esp.Name.Visible = false;
		end
		if Config.ESP.ShowDistance then
			esp.Distance.Position = Vector2.new(screenPos.X, screenPos.Y - 25);
			esp.Distance.Text = math.floor(distance) .. "m";
			esp.Distance.Visible = true;
		else
			esp.Distance.Visible = false;
		end
		if Config.ESP.ShowBoxes then
			local head = character:FindFirstChild("Head");
			if head then
				local topPos, topOnScreen = WorldToScreen(head.Position + Vector3.new(0, head.Size.Y / 2, 0));
				local bottomPos, bottomOnScreen = WorldToScreen(rootPart.Position - Vector3.new(0, rootPart.Size.Y, 0));
				if (topOnScreen and bottomOnScreen) then
					local height = math.abs(bottomPos.Y - topPos.Y);
					local width = height / 2;
					local tl = Vector2.new(topPos.X - (width / 2), topPos.Y);
					local tr = Vector2.new(topPos.X + (width / 2), topPos.Y);
					local bl = Vector2.new(bottomPos.X - (width / 2), bottomPos.Y);
					local br = Vector2.new(bottomPos.X + (width / 2), bottomPos.Y);
					esp.Box.TopLeft.From = tl;
					esp.Box.TopLeft.To = tr;
					esp.Box.TopLeft.Visible = true;
					esp.Box.TopRight.From = tr;
					esp.Box.TopRight.To = br;
					esp.Box.TopRight.Visible = true;
					esp.Box.BottomLeft.From = bl;
					esp.Box.BottomLeft.To = tl;
					esp.Box.BottomLeft.Visible = true;
					esp.Box.BottomRight.From = br;
					esp.Box.BottomRight.To = bl;
					esp.Box.BottomRight.Visible = true;
					if Config.ESP.ShowHealth then
						local healthData = GetHealth(character);
						if healthData then
							local healthPercent = healthData.Health / healthData.MaxHealth;
							esp.HealthBar.Outline.From = Vector2.new(tl.X - 6, tl.Y);
							esp.HealthBar.Outline.To = Vector2.new(bl.X - 6, bl.Y);
							esp.HealthBar.Outline.Visible = true;
							local barHeight = height * healthPercent;
							esp.HealthBar.Bar.From = Vector2.new(tl.X - 6, bl.Y);
							esp.HealthBar.Bar.To = Vector2.new(tl.X - 6, bl.Y - barHeight);
							esp.HealthBar.Bar.Color = Color3.fromRGB(255 * (1 - healthPercent), 255 * healthPercent, 0);
							esp.HealthBar.Bar.Visible = true;
						end
					end
				end
			end
		end
		if Config.ESP.ShowTracers then
			esp.Tracer.From = Vector2.new(Camera.ViewportSize.X / 2, Camera.ViewportSize.Y);
			esp.Tracer.To = screenPos;
			esp.Tracer.Visible = true;
		else
			esp.Tracer.Visible = false;
		end
	end
	if Config.ESP.ShowNPCs then
		for character, esp in pairs(NPCESPObjects) do
			if (not character or not character.Parent) then
				RemoveNPCESP(character);
				continue;
			end
			local rootPart = GetRootPart(character);
			if not rootPart then
				HideESP(esp);
				continue;
			end
			local distance = (rootPart.Position - Camera.CFrame.Position).Magnitude;
			if (distance > Config.ESP.MaxDistance) then
				HideESP(esp);
				continue;
			end
			local screenPos, onScreen = WorldToScreen(rootPart.Position);
			if not onScreen then
				HideESP(esp);
				continue;
			end
			if Config.ESP.ShowNames then
				esp.Name.Position = Vector2.new(screenPos.X, screenPos.Y - 40);
				esp.Name.Text = character.Name or "Zombie";
				esp.Name.Visible = true;
			end
			if Config.ESP.ShowDistance then
				esp.Distance.Position = Vector2.new(screenPos.X, screenPos.Y - 25);
				esp.Distance.Text = math.floor(distance) .. "m";
				esp.Distance.Visible = true;
			end
			if Config.ESP.ShowBoxes then
				local head = character:FindFirstChild("Head");
				if head then
					local topPos, topOnScreen = WorldToScreen(head.Position + Vector3.new(0, head.Size.Y / 2, 0));
					local bottomPos, bottomOnScreen = WorldToScreen(rootPart.Position - Vector3.new(0, rootPart.Size.Y, 0));
					if (topOnScreen and bottomOnScreen) then
						local height = math.abs(bottomPos.Y - topPos.Y);
						local width = height / 2;
						local tl = Vector2.new(topPos.X - (width / 2), topPos.Y);
						local tr = Vector2.new(topPos.X + (width / 2), topPos.Y);
						local bl = Vector2.new(bottomPos.X - (width / 2), bottomPos.Y);
						local br = Vector2.new(bottomPos.X + (width / 2), bottomPos.Y);
						esp.Box.TopLeft.From = tl;
						esp.Box.TopLeft.To = tr;
						esp.Box.TopLeft.Visible = true;
						esp.Box.TopRight.From = tr;
						esp.Box.TopRight.To = br;
						esp.Box.TopRight.Visible = true;
						esp.Box.BottomLeft.From = bl;
						esp.Box.BottomLeft.To = tl;
						esp.Box.BottomLeft.Visible = true;
						esp.Box.BottomRight.From = br;
						esp.Box.BottomRight.To = bl;
						esp.Box.BottomRight.Visible = true;
					end
				end
			end
			if Config.ESP.ShowTracers then
				esp.Tracer.From = Vector2.new(Camera.ViewportSize.X / 2, Camera.ViewportSize.Y);
				esp.Tracer.To = screenPos;
				esp.Tracer.Visible = true;
			end
		end
	end
end
local function GetClosestPlayerForSilentAim()
	local closestPlayer = nil;
	local shortestDistance = Config.SilentAim.FOV;
	for _, player in pairs(Players:GetPlayers()) do
		if (player == LocalPlayer) then
			continue;
		end
		if (Config.SilentAim.TeamCheck and (player.Team == LocalPlayer.Team)) then
			continue;
		end
		local character = GetCharacter(player);
		if not character then
			continue;
		end
		local targetPart = character:FindFirstChild(Config.SilentAim.TargetPart);
		if not targetPart then
			continue;
		end
		local screenPos, onScreen = WorldToScreen(targetPart.Position);
		if not onScreen then
			continue;
		end
		local mousePos = UserInputService:GetMouseLocation();
		local distance = (Vector2.new(screenPos.X, screenPos.Y) - mousePos).Magnitude;
		if (distance < shortestDistance) then
			shortestDistance = distance;
			closestPlayer = targetPart;
		end
	end
	if Config.SilentAim.AimNPCs then
		for character, _ in pairs(NPCESPObjects) do
			if (not character or not character.Parent) then
				continue;
			end
			local targetPart = character:FindFirstChild(Config.SilentAim.TargetPart);
			if not targetPart then
				continue;
			end
			local screenPos, onScreen = WorldToScreen(targetPart.Position);
			if not onScreen then
				continue;
			end
			local mousePos = UserInputService:GetMouseLocation();
			local distance = (Vector2.new(screenPos.X, screenPos.Y) - mousePos).Magnitude;
			if (distance < shortestDistance) then
				shortestDistance = distance;
				closestPlayer = targetPart;
			end
		end
	end
	return closestPlayer;
end
local function GetClosestPlayer()
	local closestPlayer = nil;
	local shortestDistance = Config.Aimbot.FOV;
	for _, player in pairs(Players:GetPlayers()) do
		if (player == LocalPlayer) then
			continue;
		end
		local character = GetCharacter(player);
		if not character then
			continue;
		end
		local aimPart = character:FindFirstChild(Config.Aimbot.AimPart);
		if not aimPart then
			continue;
		end
		local screenPos, onScreen = WorldToScreen(aimPart.Position);
		if not onScreen then
			continue;
		end
		local mousePos = UserInputService:GetMouseLocation();
		local distance = (Vector2.new(screenPos.X, screenPos.Y) - mousePos).Magnitude;
		if (distance < shortestDistance) then
			shortestDistance = distance;
			closestPlayer = aimPart;
		end
	end
	if Config.Aimbot.AimNPCs then
		for character, _ in pairs(NPCESPObjects) do
			if (not character or not character.Parent) then
				continue;
			end
			local aimPart = character:FindFirstChild(Config.Aimbot.AimPart);
			if not aimPart then
				continue;
			end
			local screenPos, onScreen = WorldToScreen(aimPart.Position);
			if not onScreen then
				continue;
			end
			local mousePos = UserInputService:GetMouseLocation();
			local distance = (Vector2.new(screenPos.X, screenPos.Y) - mousePos).Magnitude;
			if (distance < shortestDistance) then
				shortestDistance = distance;
				closestPlayer = aimPart;
			end
		end
	end
	return closestPlayer;
end
local function AimbotLoop()
	if not Config.Aimbot.Enabled then
		return;
	end
	local isAiming = false;
	if (Config.Aimbot.AimKey == "MouseButton2") then
		isAiming = UserInputService:IsMouseButtonPressed(Enum.UserInputType.MouseButton2);
	elseif (Config.Aimbot.AimKey == "MouseButton1") then
		isAiming = UserInputService:IsMouseButtonPressed(Enum.UserInputType.MouseButton1);
	end
	if not isAiming then
		return;
	end
	local targetPart = GetClosestPlayer();
	if not targetPart then
		return;
	end
	local targetPos = targetPart.Position;
	local currentCFrame = Camera.CFrame;
	local targetCFrame = CFrame.new(currentCFrame.Position, targetPos);
	Camera.CFrame = currentCFrame:Lerp(targetCFrame, Config.Aimbot.Smoothness);
end
local function CreateFOVCircle()
	if FOVCircle then
		FOVCircle:Remove();
	end
	FOVCircle = Drawing.new("Circle");
	FOVCircle.Thickness = 2;
	FOVCircle.NumSides = 50;
	FOVCircle.Radius = Config.Aimbot.FOV;
	FOVCircle.Color = Config.Aimbot.FOVColor;
	FOVCircle.Visible = Config.Aimbot.ShowFOV and Config.Aimbot.Enabled;
	FOVCircle.Filled = false;
	FOVCircle.Transparency = 0.5;
end
local function CreateSilentAimFOVCircle()
	if SilentAimFOVCircle then
		SilentAimFOVCircle:Remove();
	end
	SilentAimFOVCircle = Drawing.new("Circle");
	SilentAimFOVCircle.Thickness = 2;
	SilentAimFOVCircle.NumSides = 50;
	SilentAimFOVCircle.Radius = Config.SilentAim.FOV;
	SilentAimFOVCircle.Color = Config.SilentAim.FOVColor;
	SilentAimFOVCircle.Visible = Config.SilentAim.ShowFOV and Config.SilentAim.Enabled;
	SilentAimFOVCircle.Filled = false;
	SilentAimFOVCircle.Transparency = 0.5;
end
local function UpdateFOVCircle()
	if FOVCircle then
		local mousePos = UserInputService:GetMouseLocation();
		FOVCircle.Position = mousePos;
		FOVCircle.Radius = Config.Aimbot.FOV;
		FOVCircle.Visible = Config.Aimbot.ShowFOV and Config.Aimbot.Enabled;
		FOVCircle.Color = Config.Aimbot.FOVColor;
	end
	if SilentAimFOVCircle then
		local mousePos = UserInputService:GetMouseLocation();
		SilentAimFOVCircle.Position = mousePos;
		SilentAimFOVCircle.Radius = Config.SilentAim.FOV;
		SilentAimFOVCircle.Visible = Config.SilentAim.ShowFOV and Config.SilentAim.Enabled;
		SilentAimFOVCircle.Color = Config.SilentAim.FOVColor;
	end
end
local function SetupSilentAim()
	if not hookmetamethod then
		Notify("Silent Aim", "Not supported on this executor");
		return;
	end
	local oldNamecall;
	oldNamecall = hookmetamethod(game, "__namecall", function(self, ...)
		local args = {...};
		local method = getnamecallmethod();
		if (Config.SilentAim.Enabled and ((method == "FireServer") or (method == "InvokeServer"))) then
			if (math.random(1, 100) <= Config.SilentAim.HitChance) then
				local target = GetClosestPlayerForSilentAim();
				if target then
					for i, arg in pairs(args) do
						if (typeof(arg) == "Vector3") then
							args[i] = target.Position;
						elseif (typeof(arg) == "CFrame") then
							args[i] = CFrame.new(target.Position);
						elseif ((typeof(arg) == "Instance") and arg:IsA("BasePart")) then
							args[i] = target;
						end
					end
				end
			end
		end
		return oldNamecall(self, unpack(args));
	end);
end
function CreateGUI()
	local ScreenGui = Instance.new("ScreenGui");
	ScreenGui.Name = "FTCHUB";
	ScreenGui.ResetOnSpawn = false;
	ScreenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling;
	if gethui then
		ScreenGui.Parent = gethui();
	elseif (syn and syn.protect_gui) then
		syn.protect_gui(ScreenGui);
		ScreenGui.Parent = game.CoreGui;
	else
		ScreenGui.Parent = game.CoreGui;
	end
	local BlurBG = Instance.new("Frame");
	BlurBG.Name = "BlurBG";
	BlurBG.Size = UDim2.new(1, 0, 1, 0);
	BlurBG.BackgroundColor3 = Color3.fromRGB(0, 0, 0);
	BlurBG.BackgroundTransparency = 0.5;
	BlurBG.BorderSizePixel = 0;
	BlurBG.Parent = ScreenGui;
	BlurBG.Visible = true;
	local MainFrame = Instance.new("Frame");
	MainFrame.Name = "MainFrame";
	MainFrame.Size = UDim2.new(0, 900, 0, 650);
	MainFrame.Position = UDim2.new(0.5, -450, 0.5, -325);
	MainFrame.BackgroundColor3 = Color3.fromRGB(15, 15, 25);
	MainFrame.BorderSizePixel = 0;
	MainFrame.Active = true;
	MainFrame.Parent = ScreenGui;
	MainFrame.ClipsDescendants = true;
	MainFrame.Visible = true;
	local MainCorner = Instance.new("UICorner");
	MainCorner.CornerRadius = UDim.new(0, 25);
	MainCorner.Parent = MainFrame;
	local GradientBG = Instance.new("UIGradient");
	GradientBG.Color = ColorSequence.new({ColorSequenceKeypoint.new(0, Color3.fromRGB(20, 20, 35)),ColorSequenceKeypoint.new(1, Color3.fromRGB(15, 15, 25))});
	GradientBG.Rotation = 45;
	GradientBG.Parent = MainFrame;
	local GlowBorder = Instance.new("Frame");
	GlowBorder.Size = UDim2.new(1, 4, 1, 4);
	GlowBorder.Position = UDim2.new(0, -2, 0, -2);
	GlowBorder.BackgroundColor3 = Color3.fromRGB(138, 43, 226);
	GlowBorder.BackgroundTransparency = 0.6;
	GlowBorder.BorderSizePixel = 0;
	GlowBorder.ZIndex = 0;
	GlowBorder.Parent = MainFrame;
	local GlowCorner = Instance.new("UICorner");
	GlowCorner.CornerRadius = UDim.new(0, 25);
	GlowCorner.Parent = GlowBorder;
	task.spawn(function()
		while MainFrame.Parent do
			CreateTween(GlowBorder, {BackgroundTransparency=0.3}, 2);
			task.wait(2);
			CreateTween(GlowBorder, {BackgroundTransparency=0.6}, 2);
			task.wait(2);
		end
	end);
	local Header = Instance.new("Frame");
	Header.Size = UDim2.new(1, 0, 0, 90);
	Header.BackgroundColor3 = Color3.fromRGB(10, 10, 20);
	Header.BorderSizePixel = 0;
	Header.Parent = MainFrame;
	local HeaderCorner = Instance.new("UICorner");
	HeaderCorner.CornerRadius = UDim.new(0, 25);
	HeaderCorner.Parent = Header;
	local HeaderAccent = Instance.new("Frame");
	HeaderAccent.Size = UDim2.new(1, 0, 0, 3);
	HeaderAccent.Position = UDim2.new(0, 0, 1, 0);
	HeaderAccent.BackgroundColor3 = Color3.new(1, 1, 1);
	HeaderAccent.BorderSizePixel = 0;
	HeaderAccent.Parent = Header;
	local AccentGradient = Instance.new("UIGradient");
	AccentGradient.Color = ColorSequence.new({ColorSequenceKeypoint.new(0, Color3.fromRGB(138, 43, 226)),ColorSequenceKeypoint.new(0.5, Color3.fromRGB(218, 165, 32)),ColorSequenceKeypoint.new(1, Color3.fromRGB(138, 43, 226))});
	AccentGradient.Parent = HeaderAccent;
	local LogoLabel = Instance.new("TextLabel");
	LogoLabel.Size = UDim2.new(0, 200, 0, 50);
	LogoLabel.Position = UDim2.new(0, 30, 0, 20);
	LogoLabel.BackgroundTransparency = 1;
	LogoLabel.Text = "âš¡ FTC HUB";
	LogoLabel.TextColor3 = Color3.fromRGB(255, 255, 255);
	LogoLabel.TextSize = 32;
	LogoLabel.Font = Enum.Font.GothamBlack;
	LogoLabel.TextXAlignment = Enum.TextXAlignment.Left;
	LogoLabel.Parent = Header;
	local CloseBtn = Instance.new("TextButton");
	CloseBtn.Size = UDim2.new(0, 50, 0, 50);
	CloseBtn.Position = UDim2.new(1, -70, 0, 20);
	CloseBtn.BackgroundColor3 = Color3.fromRGB(25, 25, 40);
	CloseBtn.Text = "âœ•";
	CloseBtn.TextColor3 = Color3.fromRGB(255, 100, 100);
	CloseBtn.TextSize = 24;
	CloseBtn.Font = Enum.Font.GothamBold;
	CloseBtn.BorderSizePixel = 0;
	CloseBtn.Parent = Header;
	local CloseBtnCorner = Instance.new("UICorner");
	CloseBtnCorner.CornerRadius = UDim.new(0, 12);
	CloseBtnCorner.Parent = CloseBtn;
	CloseBtn.MouseButton1Click:Connect(function()
		isUIVisible = false;
		MainFrame.Visible = false;
		BlurBG.Visible = false;
	end);
	local dragging = false;
	local dragStart, startPos;
	Header.InputBegan:Connect(function(input)
		if (input.UserInputType == Enum.UserInputType.MouseButton1) then
			dragging = true;
			dragStart = input.Position;
			startPos = MainFrame.Position;
		end
	end);
	Header.InputEnded:Connect(function(input)
		if (input.UserInputType == Enum.UserInputType.MouseButton1) then
			dragging = false;
		end
	end);
	UserInputService.InputChanged:Connect(function(input)
		if (dragging and (input.UserInputType == Enum.UserInputType.MouseMovement)) then
			local delta = input.Position - dragStart;
			MainFrame.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y);
		end
	end);
	local Sidebar = Instance.new("Frame");
	Sidebar.Size = UDim2.new(0, 220, 1, -90);
	Sidebar.Position = UDim2.new(0, 0, 0, 90);
	Sidebar.BackgroundColor3 = Color3.fromRGB(12, 12, 22);
	Sidebar.BorderSizePixel = 0;
	Sidebar.Parent = MainFrame;
	local ContentFrame = Instance.new("Frame");
	ContentFrame.Size = UDim2.new(1, -220, 1, -90);
	ContentFrame.Position = UDim2.new(0, 220, 0, 90);
	ContentFrame.BackgroundColor3 = Color3.fromRGB(18, 18, 28);
	ContentFrame.BorderSizePixel = 0;
	ContentFrame.Parent = MainFrame;
	local pages = {};
	local function CreatePage(name)
		local Page = Instance.new("ScrollingFrame");
		Page.Name = name;
		Page.Size = UDim2.new(1, -30, 1, -30);
		Page.Position = UDim2.new(0, 15, 0, 15);
		Page.BackgroundTransparency = 1;
		Page.BorderSizePixel = 0;
		Page.ScrollBarThickness = 8;
		Page.ScrollBarImageColor3 = Color3.fromRGB(138, 43, 226);
		Page.CanvasSize = UDim2.new(0, 0, 0, 0);
		Page.Visible = false;
		Page.Parent = ContentFrame;
		local Layout = Instance.new("UIListLayout");
		Layout.Padding = UDim.new(0, 15);
		Layout.Parent = Page;
		Layout:GetPropertyChangedSignal("AbsoluteContentSize"):Connect(function()
			Page.CanvasSize = UDim2.new(0, 0, 0, Layout.AbsoluteContentSize.Y + 30);
		end);
		pages[name] = Page;
		return Page;
	end
	local function CreateTabButton(name, icon, index)
		local Button = Instance.new("TextButton");
		Button.Name = name;
		Button.Size = UDim2.new(1, -20, 0, 60);
		Button.Position = UDim2.new(0, 10, 0, 10 + ((index - 1) * 70));
		Button.BackgroundColor3 = Color3.fromRGB(22, 22, 35);
		Button.BorderSizePixel = 0;
		Button.Text = "";
		Button.AutoButtonColor = false;
		Button.Parent = Sidebar;
		local BtnCorner = Instance.new("UICorner");
		BtnCorner.CornerRadius = UDim.new(0, 15);
		BtnCorner.Parent = Button;
		local Icon = Instance.new("TextLabel");
		Icon.Size = UDim2.new(0, 35, 1, 0);
		Icon.Position = UDim2.new(0, 15, 0, 0);
		Icon.BackgroundTransparency = 1;
		Icon.Text = icon;
		Icon.TextColor3 = Color3.fromRGB(200, 200, 220);
		Icon.TextSize = 24;
		Icon.Font = Enum.Font.GothamBold;
		Icon.Parent = Button;
		local Label = Instance.new("TextLabel");
		Label.Size = UDim2.new(1, -60, 1, 0);
		Label.Position = UDim2.new(0, 55, 0, 0);
		Label.BackgroundTransparency = 1;
		Label.Text = name;
		Label.TextColor3 = Color3.fromRGB(200, 200, 220);
		Label.TextSize = 16;
		Label.Font = Enum.Font.GothamSemibold;
		Label.TextXAlignment = Enum.TextXAlignment.Left;
		Label.Parent = Button;
		Button.MouseButton1Click:Connect(function()
			for _, page in pairs(pages) do
				page.Visible = false;
			end
			for _, child in pairs(Sidebar:GetChildren()) do
				if child:IsA("TextButton") then
					CreateTween(child, {BackgroundColor3=Color3.fromRGB(22, 22, 35)}, 0.25);
				end
			end
			CreateTween(Button, {BackgroundColor3=Color3.fromRGB(138, 43, 226)}, 0.25);
			pages[name].Visible = true;
		end);
		return Button;
	end
	local function CreateToggle(parent, name, default, callback)
		local Container = Instance.new("Frame");
		Container.Size = UDim2.new(1, -20, 0, 55);
		Container.BackgroundColor3 = Color3.fromRGB(22, 22, 35);
		Container.BorderSizePixel = 0;
		Container.Parent = parent;
		local Corner = Instance.new("UICorner");
		Corner.CornerRadius = UDim.new(0, 15);
		Corner.Parent = Container;
		local Label = Instance.new("TextLabel");
		Label.Size = UDim2.new(1, -100, 1, 0);
		Label.Position = UDim2.new(0, 15, 0, 0);
		Label.BackgroundTransparency = 1;
		Label.Text = name;
		Label.TextColor3 = Color3.fromRGB(240, 240, 250);
		Label.TextSize = 16;
		Label.Font = Enum.Font.GothamSemibold;
		Label.TextXAlignment = Enum.TextXAlignment.Left;
		Label.Parent = Container;
		local Toggle = Instance.new("TextButton");
		Toggle.Size = UDim2.new(0, 70, 0, 35);
		Toggle.Position = UDim2.new(1, -85, 0.5, -17.5);
		Toggle.BackgroundColor3 = (default and Color3.fromRGB(138, 43, 226)) or Color3.fromRGB(45, 45, 60);
		Toggle.Text = "";
		Toggle.AutoButtonColor = false;
		Toggle.BorderSizePixel = 0;
		Toggle.Parent = Container;
		local ToggleCorner = Instance.new("UICorner");
		ToggleCorner.CornerRadius = UDim.new(1, 0);
		ToggleCorner.Parent = Toggle;
		local Knob = Instance.new("Frame");
		Knob.Size = UDim2.new(0, 28, 0, 28);
		Knob.Position = (default and UDim2.new(1, -32, 0.5, -14)) or UDim2.new(0, 3.5, 0.5, -14);
		Knob.BackgroundColor3 = Color3.fromRGB(255, 255, 255);
		Knob.BorderSizePixel = 0;
		Knob.Parent = Toggle;
		local KnobCorner = Instance.new("UICorner");
		KnobCorner.CornerRadius = UDim.new(1, 0);
		KnobCorner.Parent = Knob;
		local enabled = default;
		Toggle.MouseButton1Click:Connect(function()
			enabled = not enabled;
			CreateTween(Toggle, {BackgroundColor3=((enabled and Color3.fromRGB(138, 43, 226)) or Color3.fromRGB(45, 45, 60))}, 0.3);
			CreateTween(Knob, {Position=((enabled and UDim2.new(1, -32, 0.5, -14)) or UDim2.new(0, 3.5, 0.5, -14))}, 0.3);
			callback(enabled);
		end);
		return Container;
	end
	local function CreateSlider(parent, name, min, max, default, callback)
		local Container = Instance.new("Frame");
		Container.Size = UDim2.new(1, -20, 0, 85);
		Container.BackgroundColor3 = Color3.fromRGB(22, 22, 35);
		Container.BorderSizePixel = 0;
		Container.Parent = parent;
		local Corner = Instance.new("UICorner");
		Corner.CornerRadius = UDim.new(0, 15);
		Corner.Parent = Container;
		local Label = Instance.new("TextLabel");
		Label.Size = UDim2.new(1, -100, 0, 25);
		Label.Position = UDim2.new(0, 15, 0, 12);
		Label.BackgroundTransparency = 1;
		Label.Text = name;
		Label.TextColor3 = Color3.fromRGB(240, 240, 250);
		Label.TextSize = 16;
		Label.Font = Enum.Font.GothamSemibold;
		Label.TextXAlignment = Enum.TextXAlignment.Left;
		Label.Parent = Container;
		local Value = Instance.new("TextLabel");
		Value.Size = UDim2.new(0, 80, 0, 25);
		Value.Position = UDim2.new(1, -95, 0, 12);
		Value.BackgroundTransparency = 1;
		Value.Text = tostring(default);
		Value.TextColor3 = Color3.fromRGB(138, 43, 226);
		Value.TextSize = 16;
		Value.Font = Enum.Font.GothamBold;
		Value.TextXAlignment = Enum.TextXAlignment.Right;
		Value.Parent = Container;
		local Track = Instance.new("Frame");
		Track.Size = UDim2.new(1, -30, 0, 12);
		Track.Position = UDim2.new(0, 15, 1, -25);
		Track.BackgroundColor3 = Color3.fromRGB(35, 35, 50);
		Track.BorderSizePixel = 0;
		Track.Parent = Container;
		local TrackCorner = Instance.new("UICorner");
		TrackCorner.CornerRadius = UDim.new(1, 0);
		TrackCorner.Parent = Track;
		local Fill = Instance.new("Frame");
		Fill.Size = UDim2.new((default - min) / (max - min), 0, 1, 0);
		Fill.BackgroundColor3 = Color3.fromRGB(138, 43, 226);
		Fill.BorderSizePixel = 0;
		Fill.Parent = Track;
		local FillCorner = Instance.new("UICorner");
		FillCorner.CornerRadius = UDim.new(1, 0);
		FillCorner.Parent = Fill;
		local Knob = Instance.new("Frame");
		Knob.Size = UDim2.new(0, 24, 0, 24);
		Knob.Position = UDim2.new((default - min) / (max - min), -12, 0.5, -12);
		Knob.BackgroundColor3 = Color3.fromRGB(255, 255, 255);
		Knob.BorderSizePixel = 0;
		Knob.Parent = Track;
		local KnobCorner = Instance.new("UICorner");
		KnobCorner.CornerRadius = UDim.new(1, 0);
		KnobCorner.Parent = Knob;
		local dragging = false;
		Track.InputBegan:Connect(function(input)
			if (input.UserInputType == Enum.UserInputType.MouseButton1) then
				dragging = true;
			end
		end);
		Track.InputEnded:Connect(function(input)
			if (input.UserInputType == Enum.UserInputType.MouseButton1) then
				dragging = false;
			end
		end);
		UserInputService.InputChanged:Connect(function(input)
			if (dragging and (input.UserInputType == Enum.UserInputType.MouseMovement)) then
				local relativePos = math.clamp((input.Position.X - Track.AbsolutePosition.X) / Track.AbsoluteSize.X, 0, 1);
				local value = math.floor(min + ((max - min) * relativePos));
				Value.Text = tostring(value);
				Fill.Size = UDim2.new(relativePos, 0, 1, 0);
				Knob.Position = UDim2.new(relativePos, -12, 0.5, -12);
				callback(value);
			end
		end);
		return Container;
	end
	local function CreateButton(parent, name, callback)
		local Button = Instance.new("TextButton");
		Button.Size = UDim2.new(1, -20, 0, 50);
		Button.BackgroundColor3 = Color3.fromRGB(138, 43, 226);
		Button.BorderSizePixel = 0;
		Button.Text = name;
		Button.TextColor3 = Color3.fromRGB(255, 255, 255);
		Button.TextSize = 16;
		Button.Font = Enum.Font.GothamBold;
		Button.AutoButtonColor = false;
		Button.Parent = parent;
		local Corner = Instance.new("UICorner");
		Corner.CornerRadius = UDim.new(0, 15);
		Corner.Parent = Button;
		Button.MouseButton1Click:Connect(callback);
		return Button;
	end
	local ESPPage = CreatePage("ESP");
	local AimbotPage = CreatePage("Aimbot");
	local SilentAimPage = CreatePage("Silent Aim");
	local PlayerPage = CreatePage("Player");
	local GunModsPage = CreatePage("Gun Mods");
	CreateTabButton("ESP", "ðŸ‘", 1);
	CreateTabButton("Aimbot", "ðŸŽ¯", 2);
	CreateTabButton("Silent Aim", "ðŸ”«", 3);
	CreateTabButton("Player", "ðŸƒ", 4);
	CreateTabButton("Gun Mods", "âš™ï¸", 5);
	CreateToggle(ESPPage, "Enable ESP", Config.ESP.Enabled, function(value)
		Config.ESP.Enabled = value;
		Notify("ESP", (value and "Enabled") or "Disabled");
	end);
	CreateToggle(ESPPage, "Show Names", Config.ESP.ShowNames, function(value)
		Config.ESP.ShowNames = value;
	end);
	CreateToggle(ESPPage, "Show Distance", Config.ESP.ShowDistance, function(value)
		Config.ESP.ShowDistance = value;
	end);
	CreateToggle(ESPPage, "Show Health", Config.ESP.ShowHealth, function(value)
		Config.ESP.ShowHealth = value;
	end);
	CreateToggle(ESPPage, "Show Boxes", Config.ESP.ShowBoxes, function(value)
		Config.ESP.ShowBoxes = value;
	end);
	CreateToggle(ESPPage, "Show Tracers", Config.ESP.ShowTracers, function(value)
		Config.ESP.ShowTracers = value;
	end);
	CreateToggle(ESPPage, "Team Check", Config.ESP.TeamCheck, function(value)
		Config.ESP.TeamCheck = value;
	end);
	CreateToggle(ESPPage, "Show NPCs/Zombies", Config.ESP.ShowNPCs, function(value)
		Config.ESP.ShowNPCs = value;
	end);
	CreateSlider(ESPPage, "Max Distance", 100, 5000, Config.ESP.MaxDistance, function(value)
		Config.ESP.MaxDistance = value;
	end);
	CreateToggle(AimbotPage, "Enable Aimbot", Config.Aimbot.Enabled, function(value)
		Config.Aimbot.Enabled = value;
		if FOVCircle then
			FOVCircle.Visible = value and Config.Aimbot.ShowFOV;
		end
		Notify("Aimbot", (value and "Enabled") or "Disabled");
	end);
	CreateToggle(AimbotPage, "Show FOV Circle", Config.Aimbot.ShowFOV, function(value)
		Config.Aimbot.ShowFOV = value;
		if FOVCircle then
			FOVCircle.Visible = value and Config.Aimbot.Enabled;
		end
	end);
	CreateToggle(AimbotPage, "Team Check", Config.Aimbot.TeamCheck, function(value)
		Config.Aimbot.TeamCheck = value;
	end);
	CreateToggle(AimbotPage, "Aim at NPCs", Config.Aimbot.AimNPCs, function(value)
		Config.Aimbot.AimNPCs = value;
	end);
	CreateSlider(AimbotPage, "FOV Size", 50, 500, Config.Aimbot.FOV, function(value)
		Config.Aimbot.FOV = value;
	end);
	CreateSlider(AimbotPage, "Smoothness", 0, 100, Config.Aimbot.Smoothness * 100, function(value)
		Config.Aimbot.Smoothness = value / 100;
	end);
	CreateToggle(SilentAimPage, "Enable Silent Aim", Config.SilentAim.Enabled, function(value)
		Config.SilentAim.Enabled = value;
		if SilentAimFOVCircle then
			SilentAimFOVCircle.Visible = value and Config.SilentAim.ShowFOV;
		end
		Notify("Silent Aim", (value and "Enabled") or "Disabled");
	end);
	CreateToggle(SilentAimPage, "Show FOV Circle", Config.SilentAim.ShowFOV, function(value)
		Config.SilentAim.ShowFOV = value;
		if SilentAimFOVCircle then
			SilentAimFOVCircle.Visible = value and Config.SilentAim.Enabled;
		end
	end);
	CreateToggle(SilentAimPage, "Team Check", Config.SilentAim.TeamCheck, function(value)
		Config.SilentAim.TeamCheck = value;
	end);
	CreateToggle(SilentAimPage, "Aim at NPCs", Config.SilentAim.AimNPCs, function(value)
		Config.SilentAim.AimNPCs = value;
	end);
	CreateSlider(SilentAimPage, "FOV Size", 50, 500, Config.SilentAim.FOV, function(value)
		Config.SilentAim.FOV = value;
	end);
	CreateSlider(SilentAimPage, "Hit Chance", 0, 100, Config.SilentAim.HitChance, function(value)
		Config.SilentAim.HitChance = value;
	end);
	CreateSlider(PlayerPage, "Walk Speed", 16, 200, Config.Player.WalkSpeed, function(value)
		Config.Player.WalkSpeed = value;
		SetWalkSpeed(value);
	end);
	CreateToggle(PlayerPage, "Enable Fly", Config.Player.FlyEnabled, function(value)
		Config.Player.FlyEnabled = value;
		if value then
			StartFly();
		else
			StopFly();
		end
	end);
	CreateSlider(PlayerPage, "Fly Speed", 10, 200, Config.Player.FlySpeed, function(value)
		Config.Player.FlySpeed = value;
	end);
	CreateButton(PlayerPage, "Reset Walk Speed", function()
		SetWalkSpeed(Config.Player.DefaultWalkSpeed);
		Notify("Walk Speed", "Reset to default");
	end);
	CreateToggle(GunModsPage, "No Recoil", Config.GunMods.NoRecoil, function(value)
		Config.GunMods.NoRecoil = value;
		ApplyGunMods();
		Notify("No Recoil", (value and "Enabled") or "Disabled");
	end);
	CreateToggle(GunModsPage, "No Spread", Config.GunMods.NoSpread, function(value)
		Config.GunMods.NoSpread = value;
		ApplyGunMods();
		Notify("No Spread", (value and "Enabled") or "Disabled");
	end);
	CreateToggle(GunModsPage, "Auto Reload", Config.GunMods.AutoReload, function(value)
		Config.GunMods.AutoReload = value;
		Notify("Auto Reload", (value and "Enabled") or "Disabled");
	end);
	pages['ESP'].Visible = true;
	local firstButton = Sidebar:FindFirstChild("ESP");
	if firstButton then
		firstButton.BackgroundColor3 = Color3.fromRGB(138, 43, 226);
	end
	MainGui = ScreenGui;
	return ScreenGui;
end
InitializeWalkSpeed();
CreateFOVCircle();
CreateSilentAimFOVCircle();
SetupSilentAim();
for _, player in pairs(Players:GetPlayers()) do
	if (player ~= LocalPlayer) then
		CreateESP(player);
	end
end
Players.PlayerAdded:Connect(function(player)
	CreateESP(player);
end);
Players.PlayerRemoving:Connect(function(player)
	RemoveESP(player);
end);
LocalPlayer.CharacterAdded:Connect(function()
	InitializeWalkSpeed();
end);
RunService.RenderStepped:Connect(function()
	if not KeyValidated then
		return;
	end
	local currentTime = tick();
	if ((currentTime - lastESPUpdate) >= Config.ESP.UpdateRate) then
		UpdateESP();
		lastESPUpdate = currentTime;
	end
	UpdateFOVCircle();
	AimbotLoop();
	CheckAutoReload();
	if (Config.ESP.ShowNPCs and ((currentTime - lastNPCScan) >= NPC_SCAN_INTERVAL)) then
		local npcs = GetAllNPCs();
		for character, _ in pairs(NPCESPObjects) do
			if (not character or not character.Parent) then
				RemoveNPCESP(character);
			end
		end
		for _, npc in pairs(npcs) do
			if not NPCESPObjects[npc] then
				CreateNPCESP(npc);
			end
		end
		lastNPCScan = currentTime;
	end
end);
LocalPlayer.CharacterAdded:Connect(function(character)
	character.ChildAdded:Connect(function(child)
		if child:IsA("Tool") then
			task.wait(0.1);
			ApplyGunMods();
		end
	end);
end);
UserInputService.InputBegan:Connect(function(input, gameProcessed)
	if gameProcessed then
		return;
	end
	if ((input.KeyCode == Enum.KeyCode.RightShift) and KeyValidated and MainGuiEnabled) then
		isUIVisible = not isUIVisible;
		if MainGui then
			local mainFrame = MainGui:FindFirstChild("MainFrame");
			local blurBG = MainGui:FindFirstChild("BlurBG");
			if mainFrame then
				mainFrame.Visible = isUIVisible;
			end
			if blurBG then
				blurBG.Visible = isUIVisible;
			end
		end
	end
end);
Notify("FTC HUB", "Checking for saved key...");
local savedKey = LoadKey();
if savedKey then
	Notify("FTC HUB", "Found saved key, validating...");
	task.spawn(function()
		local isValid = ValidateKey(savedKey);
		if isValid then
			Notify("FTC HUB", "Key validated! Loading hub...");
			KeyValidated = true;
			CreateGUI();
			MainGuiEnabled = true;
			task.wait(0.5);
			Notify("FTC HUB", "Loaded! Press RightShift to toggle");
		else
			Notify("FTC HUB", "Saved key expired, showing key system...");
			CreateKeySystemGUI();
		end
	end);
else
	CreateKeySystemGUI();
end
